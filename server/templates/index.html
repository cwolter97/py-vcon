{% extends "base.html" %}
{% block title %}Conserver, the vCon Server!{% endblock %}

{% block content %}
<div class="bg-white shadow overflow-hidden sm:rounded-md">
  <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3">
    {% for vcon in vCons %}
      <div class="border-2 rounded bg-gray-200">
        <a href="/details/{{vcon.uuid}}" class="block hover:white">
          <div class="px-4 py-4 sm:px-6">
              {% if 'tel' in vcon.parties[0] %}
              <div class="flex items-center justify-between">
                <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z" />
                </svg>
                <div class="text-sm font-medium text-indigo-600 text-center truncate">{{vcon.parties[0]['tel']}} </div>
                <div class="text-sm font-medium text-indigo-600 text-center truncate">called </div> 
                <div class="text-sm font-medium text-indigo-600 text-center truncate"> {{vcon.parties[1]['tel']}}</div></p>
                </div>
                <div>
                  <p class="text-sm font-medium text-indigo-600 text-center">
                    {% if vcon.dialog|length > 0 %}
                      {{ vcon.dialog[0].duration}} seconds
                    {% elif vcon.status == 'ended' %}
                      No Conversations
                    {% endif %}
                  </p>
                </div>
              {% endif %}
              {% if 'mailto' in vcon.parties[0] %}                
              <div class="flex items-center justify-between">
                <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 9v.906a2.25 2.25 0 01-1.183 1.981l-6.478 3.488M2.25 9v.906a2.25 2.25 0 001.183 1.981l6.478 3.488m8.839 2.51l-4.66-2.51m0 0l-1.023-.55a2.25 2.25 0 00-2.134 0l-1.022.55m0 0l-4.661 2.51m16.5 1.615a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V8.844a2.25 2.25 0 011.183-1.98l7.5-4.04a2.25 2.25 0 012.134 0l7.5 4.04a2.25 2.25 0 011.183 1.98V19.5z" />
                </svg>
              </div>
              <div class="text-sm font-medium text-indigo-600 text-center truncate">{{vcon.parties[0]['mailto']}} </div>
              <div class="text-sm font-medium text-indigo-600 text-center truncate"> emailed </div> 
              <div class="text-sm font-medium text-indigo-600 text-center truncate"> {{vcon.parties[1]['mailto']}}</div>
              {% endif %}
      
            <div>
              <p class="text-sm text-gray-500 text-center">
                    {{vcon.created_at}} 
              </p>
            </div>
          </div>
        </a>
      </div>
    {% endfor %}
    </div>
</div>
{% endblock %}